
2) what is nexrt js? why would use it?
* next js is react framework.
* next js fullstack react framework. simplify process of building fullstack applications with react.
* It gives both frontend and backend.
* react gives more feature 


3) Key features and Benefits -
* FullStack apps - nextjs blends frontend + backend (in same project). Advantage - Frontend and Backend are part of same project
* File based routing - routes are configured via filesystem (files + folders)
* Server Side Rendering - by default, NextJs (pre) renders all pages on server. Advantage - finished HTML page (including content) is sent to the client ( -> great for SEO)

4) Creating first NextJs app -
* showing how to create App

5) NextJs vs "Just React" - analysing the nextjs project -
* In React, all content generated on client side, hence it shows simple html content and react library link in code.
* In NextJs , all content generated on server and received on client side, so Browser can crawl when visited first time.

6) Editing First App -
* create route - "app/about/page.js" and add component in it.

7) Pages router and App router - one Framework, Two Approaches -
* Pages approach is older one.

8) How to get most of this course -
* watch videos and practices


Next JS essentials (App router)
86) Module introduction - 
* 

87) Starting Setup - 
* setting project

88) Understanding File-based Routing & React Server Components
* "page.js" tell next js to render page.
* normally, in "page.js", we have server component. So it render on server and send it to browser

89) Adding Another Route via the File System
* create file - "app/about/page.tsx" will create "/about" route

90) Navigating Between Pages - Wrong & Right Solution -
* if we use, <a href="/about">, it might create issue. when we click on about us link, it downloaded new page from server. so it doesn't become SPA.
* for this, we will use link from node.


91) Working with Pages & Layouts -
* layout is another reserved filename. "page.js" gives content of file and "layout.js" gives layout of one or more pages.
* atleast 1 rootlayout file required.
* if we want separte layout for "about", we have to add it in "about" folder.
* in "./layout", we have "RootLayout".
* in "./layout", we have metadata, for adding html head, title and so on.
* we also have "{children}", which is content actually


92) Reserved File Names, Custom Components & How To Organize A NextJS Project
* globals.css - imported in layout.js and available for every page, where this layout file get called.
* in app, if we added "icon.png", it will take it "favicon.png" and set it to tab
* we can also add normal react component, which are not treated as pages. suppose, we move image from "page.js" to another component which is in another folder. and we will import it here in page.js.
* He prefer app folder for only routing purpose, and components should be kept outside out of app folder.
* in Jsconfig.json,
    {
      "compilerOptions": {
            "paths": {
              "@/*": ["./*"]
            }  
        }
    }
    so while importing files in page.tsx, we can just use "@/components/header"
*

93) Reserved Filenames
  * As you already learned, there are some reserved filenames when working with NextJS.
  * Important: These filenames are only reserved when creating them inside of the app/ folder (or any subfolder). Outside of the app/ folder, these filenames are not treated in any special way.
  * Here's a list of reserved filenames in NextJS - you'll, of course, learn about the important ones throughout this section:
    page.js => Create a new page (e.g., app/about/page.js creates a <your-domain>/about page)
    layout.js => Create a new layout that wraps sibling and nested pages
    not-found.js => Fallback page for "Not Found" errors (thrown by sibling or nested pages or layouts)
    error.js => Fallback page for other errors (thrown by sibling pages or nested pages or layouts)
    loading.js => Fallback page which is shown whilst sibling or nested pages (or layouts) are fetching data
    route.js => Allows you to create an API route (i.e., a page which does NOT return JSX code but instead data, e.g., in the JSON format)
    You also find a list with all supported filenames & detailed explanations in the official docs: https://nextjs.org/docs/app/api-reference/file-conventions

94) Configuring Dynamic Routes and Using route Parameters -
*  by adding, "app/blog/[id]/page.tsx", we will add dynamic routes. by default, in "app/blog/[id]/page.tsx", we received props object from next js. from that, we can extract params.

export default async function BlogPost({ params }: { params: { slug: string } }) {
    let slugs = await params;
    return (
         <div className="flex min-h-screen items-center justify-center bg-zinc-50 font-sans dark:bg-black">
        <main className="flex min-h-screen w-full max-w-3xl flex-col items-center justify-center py-32 px-16 bg-white dark:bg-black sm:items-start">
          <h1 className="max-w-xs text-3xl font-semibold leading-10 tracking-tight text-black dark:text-zinc-50">
            This is the Blog Post Page. { slugs.slug }
          </h1>
        </main>
      </div>    
    )
}

95) Onwards to the Main Project: The Foodies App
* gives new setup. downloading...


98) Revisiting The Concept Of Layouts -
* layout.js = is wrapper around pages.
* if we added "app/meals/layout.js", it created nested layout. And rootlayout will be also active.
    export default function ShareMealPage({children}: {children: React.ReactNode}) {
      return (
        <>
            <div>Share meal layout</div>
            {children}
        </>
      )
    }

99) Adding a Custom Component To A Layout -
* adding a custom component in root layout. so Header component, we can place it in layout.js
* <img src={logo.src} alt="Foodies Logo" />    // with normal img, need only "logo.src"

100)  Styling NextJS Project: Your Options & Using CSS Modules
* css modules - scoped to specific components. Have to name like following - ".module.css".

import Classes from "./main-header.module.css";
<header className={Classes.header}></header>

101) Optimizing Images with the NextJS Image Component
* Next Js image component will show image once they are really visible on the page.
* handle process of setting up responsive images
* 

102) Using More Custom Components -
* he move remaining header code to another component and imported in layout file.

103) Populating The Starting Page Content
* just populating using given file

104) Preparing an Image Slideshow
* just populating using given file

105) React Server Components vs Client Components - When To Use What
* React Server Component - rendered on server and send it to client. advantage - less client side code, great for SEO
* Client Component - client component are same component with "use client" directive.

106) Using Client Components Efficiently -
* usePathname - hook for current pathname from nextjs
* sometime, we need to take help of client component, but there are some server component which doesnt need to render on client. For that, we can create component, move those content in that component.

107) Outputting Meals Data & Images With Unknown Dimensions -


108) Setting Up A SQLite Database -
* now we need database.
* lets install - npm install better-sqlite3
* run command - node initdb.ts

109) Fetching Data By Leveraging NextJS & Fullstack Capabilities -
* create file in lib - "lib/meals.ts"
    import sql from 'better-sqlite3';
    const db = sql('meals.db');
    
    export async function getMeals() {
        await new Promise((resolve) => setTimeout(resolve, 2000));
        return db.prepare('SELECT * FROM meals').all();        //to fetch all data, "get" for single data, "run" for adding data
    }
* 


110) Adding A Loading Page -
* due to above setTimeout code, we see there's flicker.
* In nextjs, it is doing caching very aggresively. it will rerender page only when we reload page or leave the page.
* add "app/loading.tsx", which will show loading while content is loading.
* loading.tsx, is a reserved filename

111. Using Suspense & Streamed Responses For Granular Loading State Management
* let move fetching data in another component
    async function Meals() {
      const meals = await getMeals();
      return <MealsGrid meals={meals} />
    }
* and then use with suspense component
    <Suspense fallback={<p>Loading meals...</p>}>
          <Meals />
        </Suspense>


112) Handling Errors
* Nextjs also provide "error.tsx" support.
* error file handle only those error which occur in the page that sits in the same folder as this error.js file or any nested page and layout.
    "use client";
    export default function Error({error, reset}: {error: Error; reset: () => void}) {
      return (<main className="error">
        <p>Loading error</p>
      </main>);
    }


113) Handling "Not Found" States -
* "not-found.tsx" add in root folder. will catch all not-found errors.
export default function NotFound() {
    return (
        <main className="not-found">
            <h1>404 - Page Not Found</h1>
            <p>Sorry, the page you are looking for does not exist.</p>
        </main>
    );
}


114. Loading & Rendering Meal Details via Dynamic Routes & Route Parameters
* fetching single item -
    export function getMeal(slug  : string) {
        return db.prepare('SELECT * FROM meals WHERE slug = ?').get(slug);      // ? used to prevent SQL injection, used as placeholder
    }
* and bind it to component


115. Throwing Not Found Errors For Individual Meals
* if meal not found, handle like following -
        if(!meal) {
          notFound();   // this will trigger the not-found.tsx page
        }

116. Getting Started with the "Share Meal" Form


117. Getting Started with a Custom Image Picker Input Component
* uses "useRef" to access input file element.
    const imagePickerRef = useRef(null);
    function pickImageHandler() {
        imagePickerRef.current.click();
    }

    HTML -         <input type="file" className={classes.input} id="image" ref={imagePickerRef} accept="image/png, image/jpeg" name={name} />


118. Adding an Image Preview to the Picker
* code 

const [val, setVal] = useState();
    const imagePickerRef = useRef(null);
    function pickImageHandler() {
        imagePickerRef.current.click();
    }
    function onChangeHandler(event : React.ChangeEvent<HTMLInputElement>): void {
        
        const files = event.target.files[0];
        if(!files) {
          setVal(null);
            return;
        }
        const fileReader = new FileReader();
        fileReader.onload = () => {
            setVal(fileReader.result);
        }
        fileReader.readAsDataURL(files);

    }

119. Improving the Image Picker Component
* code improved as per instructions.

120) Introducing & Using Server Actions for Handling Form Submissions
* showing "use server" directive. To make function "server Action", need to use "use server" directive. It made sure, it get called on server. 
* this feature available in react and nextjs, both. But to use with React, you need help of nextjs.
* after creating server actions, we can assign server action as value for the action prop on a function.
* when form got submitted, it will create request and send it to this next.js server, that serving website. so server action get triggered. and you can handle the form submission there, but on the server.

async function shareMeal(formData: FormData) {
    'use server';
    const meal = {
      title: formData.get('title')?.toString() || '',
      summary: formData.get('summary')?.toString() || '',
      instructions: formData.get('instructions')?.toString() || '',
      creator_email: formData.get('email')?.toString() || '',
      creator: formData.get('name')?.toString() || '',
      image: formData.get('image')?.toString() || '',
    };
    console.log(meal);
    }
}

121) Storing Server Actions in Separate Files 
* server action does not allow in client component. 
* We might require server action in separate file.
* if client component and server actions comes in one file, it might create issue.

// lib/action.ts
"use server"
export async function shareMeal(formData: FormData) {
    const meal = {
      title: formData.get('title'),
      summary: formData.get('summary'),
      instructions: formData.get('instructions'),
      creator_email: formData.get('email'),
      creator: formData.get('name'),
      image: formData.get('image'),
    };
    console.log(meal);
}

// in other file
import { shareMeal } from '../../../lib/actions';


122) Creating a Slug & Sanitizing User Input for XSS Protection
* lets add this data in db.
* we also need slug. That we will generate based on title. for that, we will install "slugify" and for cross site scripting attacks "xss".

    export function saveMeal(meal) {
        meal.slug = slugify(meal.title, { lower: true });  //to create URL friendly slugs
        meal.instructions = xss(meal.instructions);    //to sanitize input and prevent XSS attacks
    }

123) Storing Uploaded Images & Storing Data in the Database
* image should be stored on file system, not in database
* 
